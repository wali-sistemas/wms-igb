<igb-navbar></igb-navbar>

<div class="container content">
  <h3>Generar Colillas de Pago</h3>
  <div class="alert alert-danger text-center error-alert" role="alert" *ngIf="errorMessage" aria-live="polite">
    {{errorMessage}}
  </div>
  <div class="alert alert-success success-alert" role="alert" *ngIf="successMessage" aria-live="polite">
    {{successMessage}}
  </div>
  <div class="main-container">
    <div class="tarjeta-ingreso-agrupada">
      <div class="ingreso-card">
        <h4>Datos del Solicitante</h4>
        <table class="table">
          <tr>
            <th>Empresa</th>
            <td>
              <select class="form-control" [(ngModel)]="selectedCompany" name="selectedCompany"
                (ngModelChange)="onCompanyChange()" required [disabled]="formLocked">
                <option value="" disabled>Seleccione empresa</option>
                <option value="IGB_NOVAWEB">IGB</option>
                <option value="MTZ_NOVAWEB">MOTOZONE</option>
                <option value="VILNA_NOVAWEB">REDPLAS</option>
                <option value="WALI_NOVAWEB">WALI</option>
                <option value="DSM_NOVAWEB">DIGITAL</option>
                <option value="INVERSUR_NOVAWEB">INVERSUR</option>
                <option value="MOTOREPUESTOS_NOVAWEB">MOTOREPUESTOS</option>
              </select>
            </td>
          </tr>
          <tr>
            <th>Cédula</th>
            <td>
              <input type="number" class="form-control" [(ngModel)]="cedula" name="cedula" placeholder="Ingrese cédula"
                required [disabled]="formLocked" />
            </td>
          </tr>
          <tr>
            <th>Año / Mes</th>
            <td>
              <div class="fila-doble">
                <input type="text" class="form-control" [value]="selectedYear" disabled />
                <select class="form-control" [(ngModel)]="selectedMonth" name="selectedMonth" required
                  [disabled]="formLocked">
                  <option value="" disabled>Seleccione mes</option>
                  <option value="1">Enero</option>
                  <option value="2">Febrero</option>
                  <option value="3">Marzo</option>
                  <option value="4">Abril</option>
                  <option value="5">Mayo</option>
                  <option value="6">Junio</option>
                  <option value="7">Julio</option>
                  <option value="8">Agosto</option>
                  <option value="9">Septiembre</option>
                  <option value="10">Octubre</option>
                  <option value="11">Noviembre</option>
                  <option value="12">Diciembre</option>
                </select>
              </div>
            </td>
          </tr>
          <tr>
            <th>Periodo</th>
            <td>
              <select class="form-control" [(ngModel)]="selectedPeriodo" name="selectedPeriodo" required
                [disabled]="formLocked">
                <option value="" disabled>Seleccione el periodo</option>
                <option value="15">QUICENA 1 (1-15)</option>
                <option value="30">QUINCENA 2 (16-30)</option>
              </select>
            </td>
          </tr>
          <tr>
            <th>Fecha nacimiento</th>
            <td>
              <input type="date" class="form-control" [(ngModel)]="fechaNacimiento" name="fechaNacimiento" required
                [disabled]="formLocked" />
            </td>
          </tr>
        </table>
        <div class="employee-actions">
          <button type="button" class="btn btn-primary" (click)="mostrarResumen()"
            [disabled]="formLocked || !selectedCompany || !cedula || !selectedYear || !selectedMonth || !selectedPeriodo || !fechaNacimiento">
            Continuar
          </button>
          <button type="button" class="btn btn-secondary" (click)="cancelForm()" [disabled]="formLocked">
            Cancelar
          </button>
        </div>
      </div>
    </div>
    <div class="col-derecha" *ngIf="showResumen">
      <div class="card-box">
        <h4>DETALLES DE LA COLILLA</h4>
        <table class="table">
          <tr>
            <th>Empresa</th>
            <td>{{selectedCompanyPrint}}</td>
          </tr>
          <tr>
            <th>Documento</th>
            <td>{{cedula}}</td>
          </tr>
          <tr>
            <th>Fecha colilla</th>
            <td>{{selectedYear}}-{{selectedMonth}}-{{computedDay}}</td>
          </tr>
        </table>
        <div class="employee-actions">
          <button type="button" class="btn btn-success" (click)="generatePaystub()">Confirmar</button>
          <button type="button" class="btn btn-secondary" (click)="editar()">Volver</button>
        </div>
      </div>
    </div>
  </div>
</div>
