<igb-navbar></igb-navbar>
<!--Modal procesando-->
<div id="modal_transfer_process" class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <div class="progress">
          <div class="progress-bar progress-bar-info progress-bar-striped active" role="progressbar" aria-valuenow="100"
            aria-valuemin="0" aria-valuemax="100" style="width: 100%">
            <span class="sr-only">Procesando transferencia</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Modal Direcciones -->
<div class="modal fade get-quote-modal in" id="address-generator" role="dialog" aria-hidden="false"
  data-keyboard="false" data-backdrop="static">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h5 class="modal-title"><strong>Dirección</strong></h5>
      </div>
      <div class="modal-body contact-modal-body text-center">
        <p>*Para ingresar la dirección diligenciar el siguiente formulario*</p>
        <input id="customDir" [(ngModel)]="clientPn.address" (ngModelChange)="onFormChange()" placeholder="Dirección"
          readonly="readonly" type="text" class="form-control" style="margin-bottom: 8px;" (blur)="trimInput('address')"
          id="address" name="address">
        <p style="color: #cf423b;font-weight: bold;">
          Verificar en el campo dirección que este ingresada correctamente
        </p>
        <div class="row form-group">
          <div class="col-md-4 pr-0">
            <label>CALLE</label>
            <select id="tipoDi1" name="tipoDi1" [(ngModel)]="tipoDi1" class="form-control" (change)="updateAddres()">
              <option value="CL">CALLE</option>
              <option value="CR">CARRERA</option>
              <option value="AV">AVENIDA</option>
              <option value="CIR">CIRCULAR</option>
              <option value="DG">DIAGONAL</option>
              <option value="TV">TRANSVERSAL</option>
              <option value="MZ">MANZANA</option>
              <option value="KM">KILOMETRO</option>
              <option value="LT">LOTE</option>
              <option value="VRD">VEREDA</option>
              <option value="AUT">AUTOPISTA</option>
              <option value="VIA">VÍA</option>
            </select>
          </div>
          <div class="col-md-2 px-0">
            <label>12</label>
            <input id="numDi1" class="form-control" [(ngModel)]="numDi1" (input)="updateAddres()">
          </div>
          <div class="col-md-2 px-0">
            <label>A</label>
            <select id="stDi1" class="form-control" [(ngModel)]="stDi1" (change)="updateAddres()">
              <option value="">-</option>
              <option value=" A">A</option>
              <option value=" B">B</option>
              <option value=" C">C</option>
              <option value=" D">D</option>
              <option value=" E">E</option>
              <option value=" F">F</option>
              <option value=" G">G</option>
              <option value=" H">H</option>
              <option value=" I">I</option>
            </select>
          </div>
          <div class="col-md-2 px-0">
            <label>A</label>
            <select id="stDi1a" class="form-control" [(ngModel)]="stDi1a" (change)="updateAddres()">
              <option value="">-</option>
              <option value=" A">A</option>
              <option value=" B">B</option>
              <option value=" C">C</option>
              <option value=" D">D</option>
              <option value=" E">E</option>
              <option value=" F">F</option>
              <option value=" G">G</option>
              <option value=" H">H</option>
              <option value=" I">I</option>
            </select>
          </div>
          <div class="col-md-2 pl-0">
            <label>SUR</label>
            <select id="cardiDi1" class="form-control" [(ngModel)]="cardiDi1" (change)="updateAddres()">
              <option value="">-</option>
              <option value=" SUR">SUR</option>
              <option value=" ESTE">ESTE</option>
              <option value=" OESTE">OESTE</option>
              <option value=" NORTE">NORTE</option>
            </select>
          </div>
        </div>
        <div class="row form-group" style="margin-top: 20px;">
          <div class="col-md-1 pr-0" style="font-size: 23px;padding-top: 30px;">#</div>
          <div class="col-md-2 px-0">
            <label>34</label>
            <input id="numDi2" class="form-control" [(ngModel)]="numDi2" (input)="updateAddres()">
          </div>
          <div class="col-md-2 px-0">
            <label>B</label>
            <select id="stDi2" class="form-control" [(ngModel)]="stDi2" (change)="updateAddres()">
              <option value="">-</option>
              <option value=" A">A</option>
              <option value=" B">B</option>
              <option value=" C">C</option>
              <option value=" D">D</option>
              <option value=" E">E</option>
              <option value=" F">F</option>
              <option value=" G">G</option>
              <option value=" H">H</option>
              <option value=" I">I</option>
            </select>
          </div>
          <div class="col-md-2 px-0">
            <label>B</label>
            <select id="stDi2a" class="form-control" [(ngModel)]="stDi2a" (change)="updateAddres()">
              <option value="">-</option>
              <option value=" A">A</option>
              <option value=" B">B</option>
              <option value=" C">C</option>
              <option value=" D">D</option>
              <option value=" E">E</option>
              <option value=" F">F</option>
              <option value=" G">G</option>
              <option value=" H">H</option>
              <option value=" I">I</option>
            </select>
          </div>
          <div class="col-md-2 pr-0">
            <label>SUR</label>
            <select id="cardiDi2" class="form-control" [(ngModel)]="cardiDi2" (change)="updateAddres()">
              <option value="">-</option>
              <option value=" SUR">SUR</option>
              <option value=" ESTE">ESTE</option>
              <option value=" OESTE">OESTE</option>
              <option value=" NORTE">NORTE</option>
            </select>
          </div>
          <div class="col-md-1" style="font-size: 23px;padding-top: 30px;">-</div>
          <div class="col-md-2 pl-0">
            <label>56</label>
            <input id="numDi3" class="form-control" [(ngModel)]="numDi3" (input)="updateAddres()">
          </div>
        </div>
        <div class="row form-group" style="margin-top: 20px;">
          <div class="col-md-4">
            <label>Tipo Vivienda</label>
            <select id="tipoViv" class="form-control" [(ngModel)]="tipoViv" (change)="updateAddres()">
              <option value="">-</option>
              <option value=" CONJ">CONJUNTO</option>
              <option value=" ED">EDIFICIO</option>
              <option value=" UR">UNIDAD RESIDENCIAL</option>
              <option value=" CA">CASA</option>
            </select>
          </div>
          <div class="col-md-5 px-0">
            <label>Nombre (Unidad, Edificio)</label>
            <input id="undDi" class="form-control" [(ngModel)]="undDi" (input)="updateAddres()">
          </div>
          <div class="col-md-3">
            <label>#Apto / Casa</label>
            <input id="numApto" class="form-control" [(ngModel)]="numApto" (input)="updateAddres()">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger icon-refresh input-lg" title="Limpiar" (click)="deleteNomenclature()"
          style="font-size: 23px;"></button>
        <button class="btn btn-primary icon-tracking-tres input-lg" title="Grabar" (click)="onFormChange()"
          data-dismiss="modal" aria-label="Close" style="font-size: 23px;"></button>
      </div>
    </div>
  </div>
</div>
<!-- Modal de Confirmación Creacion Cliente-->
<div id="confirmationModalCreate" class="modal fade" role="dialog" data-keyboard="false" data-backdrop="static">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Confirmación</h4>
      </div>
      <div class="modal-body">
        <p>
          <b>¿Está seguro que desea Crear el cliente?</b>
          <br />Al hacerlo, se perderan los cambios realizados
          en el formulario.
        </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="createClient()" data-dismiss="modal">Confirmar</button>
      </div>
    </div>
  </div>
</div>
<!-- Modal de Confirmación Creacion Cliente-->
<div class="container content">
  <div class="row">
    <div class="col-xs-10">
      <h3>Creación de Persona Natural</h3>
    </div>
    <div class="col-xs-2">
      <div class="reload">
        <span class="icon-refresh" (click)="clear()" title="Recargar Formulario"></span>
      </div>
    </div>
  </div>
  <!--Alerta error-->
  <div class="row" *ngIf="changeCustomerPNErrorMessage" role="alert">
    <div class="col-xs-12">
      <div class="alert alert-danger">
        {{changeCustomerPNErrorMessage}}
      </div>
    </div>
  </div>
  <!--Alerta aprobación-->
  <div class="row" *ngIf="changeCustomerPNMessage" role="alert">
    <div class="col-xs-12">
      <div class="alert alert-success">
        {{changeCustomerPNMessage}}
      </div>
    </div>
  </div>
  <!-- Contacto y ubicación -->
  <div class="block-seccion">
    <div class="title-address">
      <div class="final-section">
        <b>
          <h5><strong>Datos del cliente</strong></h5>
        </b>
      </div>
    </div>
    <!-- Contenido Informacion Principal -->
    <div class="row">
      <div class="col-xs-12 col-md-4">
        <div class="seccion">
          <label>Nombre MM*</label>
          <input type="text" class="form-control input-lg" autocomplete="off"
            oninput="this.value = this.value.replace(/[^A-Za-z\s]/g, '').toUpperCase()" placeholder="Ej: WILSON ANDRES"
            [(ngModel)]="clientPn.firstname" (ngModelChange)="onFormChange()"
            (blur)="touchedFields.firstname = true; trimInput('firstname')" id="name" name="name">
        </div>
      </div>
      <div class="col-xs-12 col-md-4">
        <div class="seccion">
          <label>Primer Apellido MM*</label>
          <input type="text" class="form-control input-lg" autocomplete="off"
            oninput="this.value = this.value.replace(/[^A-Za-z\s]/g, '').toUpperCase()" placeholder="Ej: NEIRA"
            [(ngModel)]="clientPn.lastname1" (ngModelChange)="onFormChange()"
            (blur)="touchedFields.lastname1 = true; trimInput('lastname1')" id="lastname1" name="lastname1">
        </div>
      </div>
      <div class="col-xs-12 col-md-4">
        <div class="seccion">
          <label>Segundo Apellido MM*</label>
          <input type="text" class="form-control input-lg" autocomplete="off"
            oninput="this.value = this.value.replace(/[^A-Za-z\s]/g, '').toUpperCase()" placeholder="Ej: DIAZ"
            [(ngModel)]="clientPn.lastname2" (ngModelChange)="onFormChange()"
            (blur)="touchedFields.lastname2 = true; trimInput('lastname2')" id="lastname2" name="lastname2">
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12 col-md-5">
        <div class="seccion">
          <label>Código*</label>
          <input type="text" class="form-control input-lg" autocomplete="off" placeholder="Ej:93403038" maxlength="20"
            oninput="this.value = this.value.replace(/[^cC0-9]/g, '').toUpperCase()" [(ngModel)]="clientPn.document"
            id="cardCode" (ngModelChange)="onFormChange()" (blur)="touchedFields.document = true; trimInput('document')"
            id="document" name="document">
        </div>
      </div>
      <div class="col-xs-12 col-md-7">
        <div class="seccion">
          <label>Correo Electrónico*</label>
          <input type="text" class="form-control input-lg" autocomplete="off" id="email" name="email"
            placeholder="Ej: JAPONESA@HOTMAIL.COM" oninput="this.value = this.value.replace(/[^a-zA-Z0-9\-_@.]/g, '')"
            maxlength="40" [(ngModel)]="clientPn.mail" (ngModelChange)="onFormChange()"
            (blur)="touchedFields.mail = true; trimInput('mail')" id="mail" name="mail">
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-6 col-md-6">
        <div class="seccion">
          <label>Teléfono Fijo*</label>
          <input type="text" class="form-control input-lg" autocomplete="off" maxlength="30"
            placeholder="Ej: 6042596280" oninput="this.value = this.value.toUpperCase().replace(/[^0-9ex tEX T]/g, '')"
            [(ngModel)]="clientPn.phone" (ngModelChange)="onFormChange()"
            (blur)="touchedFields.phone = true; trimInput('phone')" id="phone" name="phone">
        </div>
      </div>
      <div class="col-xs-6 col-md-6">
        <div class="seccion">
          <label>Teléfono Móvil*</label>
          <input type="text" class="form-control input-lg" autocomplete="off" maxlength="30"
            placeholder="Ej: 3106194511" oninput="this.value = this.value.toUpperCase().replace(/[^0-9ex tEX T]/g, '')"
            [(ngModel)]="clientPn.cellular" (ngModelChange)="onFormChange()"
            (blur)="touchedFields.cellular = true; trimInput('cellular')" id="cellular" name="cellular">
        </div>
      </div>
    </div>
  </div>
  <!-- Tab Consulta de centrales de riesgo -->
  <div class="last-section">
    <div class="title-address">
      <div class="final-section">
        <b>
          <h5><strong>Dirección de destino</strong></h5>
        </b>
      </div>
    </div>
    <!-- Controles para mostrar municipios filtrados -->
    <div class="row">
      <div class="col-xs-6 col-md-6 seccion">
        <label>Departamento*</label>
        <select class="form-control input-lg" [(ngModel)]="clientPn.codDepartamento"
          (ngModelChange)="onDepartamentChange()">
          <option value="" disabled>Selecciona un Departamento</option>
          <option *ngFor="let departmen of departments" [value]="departmen.code"> {{departmen.name}} </option>
        </select>
      </div>
      <div class="col-xs-6 col-md-6 seccion">
        <label>Municipio*</label>
        <select class="form-control input-lg" [(ngModel)]="clientPn.codMunicipio" (ngModelChange)="onFormChange()">
          <option value="" disabled>Selecciona un Municipio</option>
          <option *ngFor="let municipality of filteredMunicipalities" [value]="municipality.code">
            {{municipality.name}}</option>
        </select>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12 col-md-12">
        <div class="address">
          <div class="input-group">
            <input type="text" class="form-control input-lg" id="filter" name="filter"
              placeholder="Nomenclatura de la direccion" autocomplete="off" readonly [(ngModel)]="clientPn.address">
            <span class="input-group-btn">
              <button type="button" class="box btn btn-default btn-lg" data-toggle="modal"
                data-target="#address-generator">
                <span class="icon-edit-3" title="dirección" style="font-size: 19px;"></span>
              </button>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--Seccion-->
  <div class="row">
    <div class="col-md-4 col-xs-12">
      <div class="seccion">
        <p
          style="text-align: center; border: 1px solid #D7DBDD; border-radius: 10px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
          <b>Lista de precios</b>
        </p>
        <div class="check">
          <div class="radio">
            <label>
              <input type="radio" name="radio" id="radio1" [(ngModel)]="clientPn.priceList"
                (ngModelChange)="onFormChange()" value="3">
              Mercado Libre
            </label>
          </div>
          <div class="radio">
            <label>
              <input type="radio" name="radio" id="radio2" [(ngModel)]="clientPn.priceList"
                (ngModelChange)="onFormChange()" value="4">
              Linio
            </label>
          </div>
          <div class="radio">
            <label>
              <input type="radio" name="radio" id="radio3" [(ngModel)]="clientPn.priceList"
                (ngModelChange)="onFormChange()" value="5">
              Exito
            </label>
          </div>
          <div class="radio">
            <label>
              <input type="radio" name="radio" id="radio4" [(ngModel)]="clientPn.priceList"
                (ngModelChange)="onFormChange()" value="6">
              Luego pago
            </label>
          </div>
          <div class="radio">
            <label>
              <input type="radio" name="radio" id="radio4" [(ngModel)]="clientPn.priceList"
                (ngModelChange)="onFormChange()" value="1">
              Página
            </label>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4 col-xs-12">
      <div class="seccion">
        <p
          style="text-align: center; border: 1px solid #D7DBDD; border-radius: 10px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
          <b>% Completado</b>
        </p>
        <canvas baseChart [data]="[camposCompletados.toFixed(0), (100 - camposCompletados).toFixed(0)]"
          [labels]="pieChartLabels" [chartType]="pieChartType" style="width: 80%; height: 80%;">
        </canvas>
      </div>
    </div>
    <div class="col-md-4 col-xs-12 ">
      <div class="secccion">
        <p
          style="text-align: center; border: 1px solid #D7DBDD; border-radius: 10px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
          <b>Crear</b>
        </p>
        <div class="customer">
          <span class="icon-add-customer" style="font-size: 170px; position: relative; top: 12px;" data-toggle="modal"
            data-target="#confirmationModalCreate" [ngClass]="{'disabled-icon': !isCreateEnabled()}">
          </span>
        </div>
      </div>
    </div>
  </div>
</div>
